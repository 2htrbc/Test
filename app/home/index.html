<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, maximum-scale=1, user-scalable=no" />
  <title>HONOR TV IPTV Menu</title>
  <style>
    html, body {
      margin: 0; padding: 0; height: 100vh; overflow: hidden;
      background: #111; font-family: 'Segoe UI', sans-serif;
      color: white; font-size: 1.5vw;
    }
    .hidden { display: none; }

    /* Login Screen */
    #login-screen {
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      height: 100vh; background: #000;
    }
    #login-screen h2 { margin-bottom: 20px; }
    #login-screen input {
      padding: 10px; border-radius: 8px; border: none;
      margin-bottom: 10px; width: 200px; text-align: center;
    }
    #login-screen button {
      padding: 10px 20px; border: none; border-radius: 8px;
      background: linear-gradient(to right, #2193b0, #6dd5ed);
      font-size: 1em; cursor: pointer;
    }
    #login-message { margin-top: 10px; font-size: 0.9em; color: #f55; }

    /* Main Menu */
    .overlay { display: flex; flex-direction: column; height: 100vh; padding: 4px 6px; }
    .movies-btn {
      margin: 6px auto; padding: 0.5em 1.5em;
      font-size: 0.85em; border-radius: 1.5em;
      text-align: center; text-decoration: none;
      background: linear-gradient(to right, #2193b0, #6dd5ed);
      box-shadow: 0 0 5px rgba(255,255,255,0.3);
      transition: filter 0.3s;
    }
    .movies-btn:hover { filter: brightness(1.2); }
    .logo { text-align: center; margin-bottom: 0.4em; }
    .logo img { width: 3em; border-radius: 50%; }
    h2 { font-size: 1em; margin: 0.3em 0; }
    .menu-grid {
      flex: 1; display: grid;
      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      gap: 0.6em; padding: 0.4em; overflow-y: auto;
      justify-items: center; align-items: center;
    }
    .channel {
      width: 3.5em; height: 3.5em; padding: 0.3em;
      border-radius: 50%; cursor: pointer;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
    }
    .channel img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
    .channel span { font-size: 0.65em; margin-top: 0.3em; text-align: center; }
    .footer { text-align: center; font-size: 0.7em; color: #ccc; margin-top: 0.4em; }

    /* Countdown */
    #countdown {
      text-align: center;
      font-size: 0.9em;
      color: #0f0;
      margin: 0.5em 0;
    }

    #logout-btn {
      text-align: center;
      display: inline-block;
      margin: 5px auto;
      padding: 6px 14px;
      border: none;
      border-radius: 10px;
      background: #ff4444;
      color: white;
      cursor: pointer;
      font-size: 0.8em;
    }

    /* Locked state */
    .locked {
      pointer-events: none;
      opacity: 0.4;
    }
    #locked-message {
      text-align: center;
      font-size: 0.9em;
      color: #f55;
      margin-top: 0.5em;
    }
  </style>
</head>
<body>
  <!-- LOGIN SCREEN -->
  <div id="login-screen">
    <h2>üîë Enter Access Code</h2>
    <input type="text" id="login-code" placeholder="Enter Code">
    <button onclick="checkLogin()">Login</button>
    <div id="login-message"></div>
  </div>

  <!-- MAIN MENU -->
  <div id="main-menu" class="hidden">
    <div class="overlay">
      <div id="countdown">‚è≥ Subscription valid</div>
      <button id="logout-btn" onclick="logout()">üö™ Logout</button>
      <div id="locked-message" class="hidden">üîí Subscription expired. Please re-login.</div>
      <a href="movies.html" class="movies-btn category">üé¨ MOVIES</a>
      <div class="logo">
        <img src="https://i.imgur.com/9jkWhU0.jpeg" alt="Honor TV Logo" />
        <h2>HONOR TV MENU</h2>
      </div>
      <div class="menu-grid">
        <div class="channel category" onclick="openChannel('livetv')">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT2TQS842esSWjINmAex8CKS6VRRGLn9KrFNrzBVYzntuYst5MVUID3ebw&s=10">
          <span>Live TV</span>
        </div>
        <div class="channel category" onclick="openChannel('kidsch')">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS6UtiRfmlh3ta9--9gtuHjVvz5KG7yO_GLtw&usqp=CAU">
          <span>KIDS CHANNEL</span>
        </div>
        <div class="channel category" onclick="openChannel('radio')">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS2t8R4JouinFJJeQp1GpvRQM1lHp6JNP4HUClYItIbDYWxYZytj_68Vz8w&s=10">
          <span>Radio PH</span>
        </div>
      </div>
      <div class="footer">Welcome to HONOR TV ‚Äî Enjoy Watching</div>
    </div>
  </div>

  <script>
    // Subscription codes and durations (in days)
    const codes = {
      "CODE60": 60,
      "CODE30": 30,
      "CODE15": 15,
      "CODE7": 7,
      "CODE1": 1
    };

    let countdownTimer;

    function checkLogin() {
      const input = document.getElementById("login-code").value.trim();
      const message = document.getElementById("login-message");

      if (codes[input]) {
        const expireDate = Date.now() + codes[input] * 24 * 60 * 60 * 1000;
        localStorage.setItem("honortv_expire", expireDate);
        localStorage.setItem("honortv_code", input);
        showMainMenu();
      } else {
        message.textContent = "‚ùå Invalid code!";
      }
    }

    function showMainMenu() {
      document.getElementById("login-screen").classList.add("hidden");
      document.getElementById("main-menu").classList.remove("hidden");
      startCountdown();
    }

    function checkStoredLogin() {
      const expire = localStorage.getItem("honortv_expire");
      if (expire && Date.now() < parseInt(expire)) {
        showMainMenu();
      } else {
        localStorage.removeItem("honortv_expire");
      }
    }

    function openChannel(id) {
      if (document.body.classList.contains("locked")) {
        alert("üîí Subscription expired. Please re-login.");
        return;
      }
      alert("Opening channel: " + id); 
    }

    function startCountdown() {
      clearInterval(countdownTimer);
      const expire = parseInt(localStorage.getItem("honortv_expire"));
      if (!expire) return;

      countdownTimer = setInterval(() => {
        const now = Date.now();
        const diff = expire - now;

        if (diff <= 0) {
          clearInterval(countdownTimer);
          lockCategories();
          return;
        }

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const minutes = Math.floor((diff / (1000 * 60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);

        document.getElementById("countdown").textContent =
          `‚è≥ Expires in: ${days}d ${hours}h ${minutes}m ${seconds}s`;
      }, 1000);
    }

    function lockCategories() {
      document.body.classList.add("locked");
      document.getElementById("countdown").textContent = "‚ùå Subscription expired";
      document.getElementById("locked-message").classList.remove("hidden");

      // Disable all categories
      document.querySelectorAll(".category").forEach(el => {
        el.classList.add("locked");
      });
    }

    function logout() {
      clearInterval(countdownTimer);
      localStorage.removeItem("honortv_expire");
      localStorage.removeItem("honortv_code");
      location.reload();
    }

    // Run on page load
    checkStoredLogin();
  </script>
</body>
</html>
